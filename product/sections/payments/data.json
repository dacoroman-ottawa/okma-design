{
  "_meta": {
    "models": {
      "transactions": "All payment and credit activity. Includes credit purchases, automatic deductions when attending class, manual adjustments, and inventory payments.",
      "studentBalances": "Current credit balance for each student per enrollment. Calculated from transaction history."
    },
    "relationships": [
      "Each Transaction belongs to one Student",
      "Credit transactions are linked to an Enrollment (student + teacher + instrument)",
      "Inventory transactions have line items for products purchased or rented",
      "Student Balances are derived from the sum of credit transactions per enrollment"
    ]
  },
  "transactions": [
    {
      "id": "txn-001",
      "type": "credit_purchase",
      "studentId": "stu-001",
      "enrollmentId": "enr-001",
      "date": "2025-01-15",
      "credits": 10,
      "pricePerCredit": 65,
      "subtotal": 650,
      "discountAmount": 50,
      "discountNote": "New student discount",
      "taxType": "HST",
      "taxRate": 0.13,
      "taxAmount": 78,
      "totalAmount": 678,
      "paymentMethod": "Credit Card",
      "note": null
    },
    {
      "id": "txn-002",
      "type": "credit_purchase",
      "studentId": "stu-002",
      "enrollmentId": "enr-002",
      "date": "2025-01-10",
      "credits": 8,
      "pricePerCredit": 55,
      "subtotal": 440,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "HST",
      "taxRate": 0.13,
      "taxAmount": 57.20,
      "totalAmount": 497.20,
      "paymentMethod": "Debit",
      "note": null
    },
    {
      "id": "txn-003",
      "type": "credit_deduction",
      "studentId": "stu-001",
      "enrollmentId": "enr-001",
      "date": "2025-01-20",
      "credits": -1,
      "pricePerCredit": 0,
      "subtotal": 0,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "None",
      "taxRate": 0,
      "taxAmount": 0,
      "totalAmount": 0,
      "paymentMethod": null,
      "note": "Class attended - Monday 4:00 PM"
    },
    {
      "id": "txn-004",
      "type": "credit_deduction",
      "studentId": "stu-001",
      "enrollmentId": "enr-001",
      "date": "2025-01-27",
      "credits": -1,
      "pricePerCredit": 0,
      "subtotal": 0,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "None",
      "taxRate": 0,
      "taxAmount": 0,
      "totalAmount": 0,
      "paymentMethod": null,
      "note": "Class attended - Monday 4:00 PM"
    },
    {
      "id": "txn-005",
      "type": "credit_purchase",
      "studentId": "stu-005",
      "enrollmentId": "enr-007",
      "date": "2025-01-05",
      "credits": 12,
      "pricePerCredit": 65,
      "subtotal": 780,
      "discountAmount": 78,
      "discountNote": "10% loyalty discount",
      "taxType": "HST",
      "taxRate": 0.13,
      "taxAmount": 91.26,
      "totalAmount": 793.26,
      "paymentMethod": "Credit Card",
      "note": "Renewal for winter term"
    },
    {
      "id": "txn-006",
      "type": "credit_adjustment",
      "studentId": "stu-002",
      "enrollmentId": "enr-002",
      "date": "2025-01-22",
      "credits": 2,
      "pricePerCredit": 0,
      "subtotal": 0,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "None",
      "taxRate": 0,
      "taxAmount": 0,
      "totalAmount": 0,
      "paymentMethod": null,
      "note": "Makeup credits for cancelled class on Jan 14"
    },
    {
      "id": "txn-007",
      "type": "credit_deduction",
      "studentId": "stu-002",
      "enrollmentId": "enr-002",
      "date": "2025-01-28",
      "credits": -1,
      "pricePerCredit": 0,
      "subtotal": 0,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "None",
      "taxRate": 0,
      "taxAmount": 0,
      "totalAmount": 0,
      "paymentMethod": null,
      "note": "Class attended - Tuesday 5:00 PM"
    },
    {
      "id": "txn-008",
      "type": "inventory_payment",
      "studentId": "stu-003",
      "enrollmentId": null,
      "date": "2025-01-18",
      "credits": 0,
      "pricePerCredit": 0,
      "subtotal": 125,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "HST",
      "taxRate": 0.13,
      "taxAmount": 16.25,
      "totalAmount": 141.25,
      "paymentMethod": "Cash",
      "note": "Violin rental - 3 month",
      "lineItems": [
        { "description": "Student Violin Rental (3 months)", "quantity": 1, "unitPrice": 125 }
      ]
    },
    {
      "id": "txn-009",
      "type": "inventory_payment",
      "studentId": "stu-004",
      "enrollmentId": null,
      "date": "2025-01-20",
      "credits": 0,
      "pricePerCredit": 0,
      "subtotal": 89.95,
      "discountAmount": 10,
      "discountNote": "Student discount",
      "taxType": "GST",
      "taxRate": 0.05,
      "taxAmount": 4.00,
      "totalAmount": 83.95,
      "paymentMethod": "Credit Card",
      "note": null,
      "lineItems": [
        { "description": "Drumsticks - Vic Firth 5A", "quantity": 2, "unitPrice": 14.95 },
        { "description": "Practice Pad", "quantity": 1, "unitPrice": 45.00 },
        { "description": "Drum Key", "quantity": 1, "unitPrice": 15.05 }
      ]
    },
    {
      "id": "txn-010",
      "type": "credit_purchase",
      "studentId": "stu-004",
      "enrollmentId": "enr-005",
      "date": "2025-01-08",
      "credits": 6,
      "pricePerCredit": 50,
      "subtotal": 300,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "None",
      "taxRate": 0,
      "taxAmount": 0,
      "totalAmount": 300,
      "paymentMethod": "E-Transfer",
      "note": null
    },
    {
      "id": "txn-011",
      "type": "credit_deduction",
      "studentId": "stu-004",
      "enrollmentId": "enr-005",
      "date": "2025-01-24",
      "credits": -1,
      "pricePerCredit": 0,
      "subtotal": 0,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "None",
      "taxRate": 0,
      "taxAmount": 0,
      "totalAmount": 0,
      "paymentMethod": null,
      "note": "Class attended - Thursday 6:00 PM"
    },
    {
      "id": "txn-012",
      "type": "credit_deduction",
      "studentId": "stu-004",
      "enrollmentId": "enr-005",
      "date": "2025-01-28",
      "credits": -1,
      "pricePerCredit": 0,
      "subtotal": 0,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "None",
      "taxRate": 0,
      "taxAmount": 0,
      "totalAmount": 0,
      "paymentMethod": null,
      "note": "Class attended - Tuesday 6:00 PM"
    },
    {
      "id": "txn-013",
      "type": "credit_adjustment",
      "studentId": "stu-005",
      "enrollmentId": "enr-007",
      "date": "2025-01-25",
      "credits": -2,
      "pricePerCredit": 0,
      "subtotal": 0,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "None",
      "taxRate": 0,
      "taxAmount": 0,
      "totalAmount": 0,
      "paymentMethod": null,
      "note": "Transferred to cello enrollment"
    },
    {
      "id": "txn-014",
      "type": "credit_purchase",
      "studentId": "stu-006",
      "enrollmentId": "enr-009",
      "date": "2025-01-12",
      "credits": 4,
      "pricePerCredit": 65,
      "subtotal": 260,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "HST",
      "taxRate": 0.13,
      "taxAmount": 33.80,
      "totalAmount": 293.80,
      "paymentMethod": "Credit Card",
      "note": "First credit purchase"
    },
    {
      "id": "txn-015",
      "type": "inventory_payment",
      "studentId": "stu-006",
      "enrollmentId": null,
      "date": "2025-01-12",
      "credits": 0,
      "pricePerCredit": 0,
      "subtotal": 29.99,
      "discountAmount": 0,
      "discountNote": null,
      "taxType": "HST",
      "taxRate": 0.13,
      "taxAmount": 3.90,
      "totalAmount": 33.89,
      "paymentMethod": "Credit Card",
      "note": null,
      "lineItems": [
        { "description": "Piano Adventures Primer Level", "quantity": 1, "unitPrice": 29.99 }
      ]
    }
  ],
  "studentBalances": [
    {
      "studentId": "stu-001",
      "enrollmentId": "enr-001",
      "teacherId": "tch-001",
      "instrumentId": "inst-001",
      "currentBalance": 8,
      "totalPurchased": 10,
      "totalUsed": 2
    },
    {
      "studentId": "stu-002",
      "enrollmentId": "enr-002",
      "teacherId": "tch-002",
      "instrumentId": "inst-002",
      "currentBalance": 9,
      "totalPurchased": 10,
      "totalUsed": 1
    },
    {
      "studentId": "stu-004",
      "enrollmentId": "enr-005",
      "teacherId": "tch-004",
      "instrumentId": "inst-004",
      "currentBalance": 4,
      "totalPurchased": 6,
      "totalUsed": 2
    },
    {
      "studentId": "stu-005",
      "enrollmentId": "enr-007",
      "teacherId": "tch-001",
      "instrumentId": "inst-001",
      "currentBalance": 10,
      "totalPurchased": 12,
      "totalUsed": 2
    },
    {
      "studentId": "stu-006",
      "enrollmentId": "enr-009",
      "teacherId": "tch-001",
      "instrumentId": "inst-001",
      "currentBalance": 4,
      "totalPurchased": 4,
      "totalUsed": 0
    }
  ]
}
